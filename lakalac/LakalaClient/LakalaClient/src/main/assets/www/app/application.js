var Application={version:"1.0.0",pages:{},core:{},service:{},resource:{local:"zh-cn",localizations:[],strings:{}},appInstance:{},session:{},defaultUI:"mobilebank",console:null,global:this,keyboard:{},patch:{},requireController:function(b){var a=Application.appInstance;if(a.getController(b)){return}Ext.require(b,function(){var c=Ext.create(b,{application:a}),d;d=a.getControllerInstances();d[b]=c;a.setControllerInstances(d)})},LocalString:function(b,d){var a;var c=Application;if(d===undefined){a=c.resource.localizations[c.resource.local]}else{a=c.resource.localizations[d]}if(typeof a==="undefined"){a=c.resource.base}if(a&&typeof a[b]==="string"){return a[b]}else{if(c.resource.base&&typeof c.resource.base[b]==="string"){return c.resource.base[b]}else{return b}}},LocalFormatString:function(){var a=arguments;if(a.length==0){return""}a[0]=Application.LocalString(a[0]);if(a.length==1){return a[0]}return Ext.util.Format.format.apply({},a)},queryParameter:Ext.Object.fromQueryString(window.location.search),definePackage:function(b,a){if(!a){a=Application.global}var g=b.split(".");var f=g.length;var e=a;for(var d=0;d<f;d++){var c=g[d];if(!e[c]){e[c]={}}e=e[c]}return e},loadModule:function(a,d,j){if(!Ext.isBoolean(j)){j=true}var i=Application;var k=Application;if(d){k=i.definePackage(d,k)}if(!Ext.isArray(a)){a=[a]}var b=a.length;for(var f=0;f<b;f++){var c=a[f];var h=c.split(".");if(h.length>1){h.pop();i.definePackage(h.join("."),k)}try{if(d){if(j){Ext.syncRequire("Application."+d+"."+c)}else{Ext.require("Application."+d+"."+c)}}else{if(j){Ext.syncRequire("Application."+c)}else{Ext.require("Application."+c)}}}catch(g){NativeApi.dialog.toast(c+i.LocalString("MSG00100"))}}},loadMode:function(){return Application.loadModule.apply(this,arguments)},loadPage:function(b,a){Application.loadModule(b,"pages",a)},log:function(a){var b=Application.console;if(b){if(typeof a!=="string"){a=a.toString()}b.insertAdjacentHTML("beforeEnd","<p>"+a+"<//p>");b.scrollTop=b.scrollHeight}},executelist:[],isRepeatExecute:function(){var a=arguments[0]||1000;var b=Application.isRepeatExecute.caller.toString();if(Application.executelist[b]){return true}Application.executelist[b]=true;setTimeout(function(){delete Application.executelist[b]},a);return false},startCashier:function(b,a){NativeApi.businesslauncher.startPageForResult("st_cashier",b,a)},cashierResult:function(c,a,b){if(Ext.os.is.iOS){NativeApi.businesslauncher.returnPage(c)}else{if(Ext.os.is.Android){NativeApi.businesslauncher.setResult(a,b);NativeApi.navigation.finish()}}},loadSession:function(){NativeApi.session.getSession(function(a){Application.session=a})}};var LoadLocalString=Application.LocalString;var NativeApi;var Utility;var AppDefaultUI=Application.defaultUI;Ext.override(Ext.event.publisher.Dom,{attachListener:function(a,c){if(!c){c=document}var b=c.defaultView;if(Ext.os.is.iOS&&Ext.os.version.getMajor()<5){document.addEventListener(a,this.onEvent,!this.doesEventBubble(a))}else{if(b&&b.addEventListener&&!(/MI 3 Build/.test(navigator.userAgent))){c.defaultView.addEventListener(a,this.onEvent,!this.doesEventBubble(a))}else{c.addEventListener(a,this.onEvent,!this.doesEventBubble(a))}}return this},removeListener:function(a,c){if(!c){c=document}var b=c.defaultView;if(Ext.os.is.iOS&&Ext.os.version.getMajor()<5){document.removeEventListener(a,this.onEvent,!this.doesEventBubble(a))}else{if(b&&b.addEventListener&&!(/MI 3 Build/.test(navigator.userAgent))){c.defaultView.removeEventListener(a,this.onEvent,!this.doesEventBubble(a))}else{c.removeEventListener(a,this.onEvent,!this.doesEventBubble(a))}}return this}});Ext.define("Application.BusinessRequest",{extend:Ext.Evented,statics:{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4,requestCount:0,requestIdPrefix:(function(){var a=new Date();return"R"+a.getHours()+a.getMinutes()+a.getSeconds()})(),getReqeustId:function(){var a=Application.BusinessRequest;return a.requestIdPrefix+a.requestCount++},statusReasons:{100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested range not satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version not supported",507:"Insufficient Storage",1000:"Request Timeout",1002:"Cannot Connect To Host",1003:"Unknown error",1004:"Not network",1008:"Not Connected To Internet",4000:"Transaction fail",4001:"Parse data fail"},copyResult:function(a,b){b.resultCode=a.resultCode;b.resultData=a.resultData;b.resultMsg=a.resultMsg;b.statusText=a.statusText;b.status=a.status;b.responseText=a.responseText;b.isFromCache=a.isFromCache;b.canShowDialog=a.canShowDialog}},config:{method:"GET",url:"",parameter:null,files:null,maskMsg:"",isFullScreenMask:false,autoToast:true,cacheRuleName:"",forceRequest:false,dataType:"RemoteJSON",autoParse:true},readyState:0,requestId:"",status:0,statusText:"",resultCode:"",resultMsg:"",resultData:{},responseText:null,isFromCache:false,canShowDialog:true,send:function(c){var a={url:this.config.url,method:this.config.method,forceRequest:this.config.forceRequest,cacheRuleName:this.config.cacheRuleName,queueIndex:this.requestId,maskMsg:this.config.maskMsg,isFullScreenMask:this.config.isFullScreenMask,autoToast:this.config.autoToast,dataType:this.config.dataType,files:this.config.files};this.readyState=Application.BusinessRequest.LOADING;var b=this;c=c||this.config.parameter;NativeApi.httprequest.send(a,c,function(d){b.successfullyCallback(d)},function(d){b.failedCallback(d)})},cancel:function(){if(this.requestId){NativeApi.httprequest.cancel(this.requestId)}this.responseText=null;this.fireEvent("abort",this);this.fireEvent("finish",this);this.readyState=Application.BusinessRequest.UNSENT},constructor:function(a){this.callParent(arguments);this.resultData={};this.requestId=Application.BusinessRequest.getReqeustId()},successfullyCallback:function(a){if(typeof a==="string"&&a==="invokeFinish"){this.readyState=Application.BusinessRequest.DONE;this.fireEvent("finish",this);return}else{if(typeof a!="object"){return}}this.parseResponse(a);if(this.config.autoParse&&this.resultCode!=="TS0000"&&this.resultCode!=="000000"){this.fireEvent("fail",this);return}this.fireEvent("success",this)},failedCallback:function(a){if(typeof a!=="object"){return}this.parseResponse(a);this.readyState=Application.BusinessRequest.DONE;this.fireEvent("fail",this)},parseResponse:function(response){this.responseText=response.data;if(this.config.dataType.toLowerCase()=="remotefile"||this.config.dataType.toLowerCase()=="localfile"){this.resultCode="";this.resultData="";this.resultMsg=""}else{if(this.config.autoParse){var data;if(response.data){data=eval("(function(){return "+response.data+";})();")}if(typeof data==="object"){this.resultCode=data._ReturnCode;this.resultData=data._ReturnData;this.resultMsg=data._ReturnMsg}else{this.resultCode="";this.resultData="";this.resultMsg=""}}}this.status=response.status;this.isFromCache=response.isFromCache;if(response.canShowDialog!==undefined){this.canShowDialog=response.canShowDialog}this.makeStatusText();if(response.isFinished){this.readyState=Application.BusinessRequest.DONE}},makeStatusText:function(){var a=Application.BusinessRequest.statusReasons;if(a[this.status]){this.statusText=a[this.status]}else{this.statusText="Unknown Error:"+this.status}},isRequestTimeout:function(){if(this.status==1000||this.status==1008||this.status==4000&&(this.resultCode==="TS1001"||this.resultCode==="FS0003"||this.resultCode==="RS0002")){return true}else{return false}}});Ext.define("Application.NavigationView",{extend:Ext.NavigationView,statics:{SingleTop:"SingleTop",SingleTask:"SingleTask"},config:{fullscreen:true,autoDestroy:true},constructor:function(a){if(Ext.os.is.Android){a=a||{};a.layout={type:"card",animation:null}}this.addCls(Ext.baseCSSPrefix+"lklnavigationview");this.callParent(arguments);this.addCls("color-main-text");this.addCls("font-size-text-normal")},push:function(b,e){if(typeof b!=="object"){return}var a=Application.service.utils;var d=a.getConfigValue(b,"pageName");if(e&&d){var f=0;switch(e){case Application.NavigationView.SingleTop:f=this.getItems().length;if(f>1&&d===this.getAt(f-1).config.pageName){return}break;case Application.NavigationView.SingleTask:f=this.getItems().length;for(var c=f-1;c>=0;c--){if(d===this.getAt(c).config.pageName){this.pop(this.getAt(c));return}}break}}var g=Application.resource.analyticsmap;if(d&&g&&g.PageTrace&&g.PageTrace[d]){NativeApi.analytics.event("pageTrace",g.PageTrace[d],1,"")}this.setNavigation(b);this.callParent([b])},onBackButtonTap:function(){if(this.getActiveItem().fireEvent("back")===false){return}this.callParent(arguments)},pop:function(b){var a=Application.navigation.getInnerItems();if(a.length<2||a.length<=b){NativeApi.navigation.goBack();return}if(Ext.isString(b)){arguments[0]='component[pageName="'+b+'"]'}var c=this.callParent(arguments);this.setNavigation(c)},nativeGoback:function(){var a=Application.navigation.getInnerItems();if(this.getActiveItem().fireEvent("back")===false){return true}if(a.length>1){Application.navigation.pop(1);return true}else{return false}},menuCallback:function(a){this.getActiveItem().fireEvent("submenutap",a)},onAction:function(){Application.service.utils.hideNumpad();this.getActiveItem().fireEvent("actiontap")},setNavigation:function(c){var a=Application.service.utils;var e=a.getConfigValue(c,"title");if(e){NativeApi.navigation.setTitle(e)}var b=a.getConfigValue(c,"actionTitle");if(b){NativeApi.navigation.showActionButton(b)}else{NativeApi.navigation.hideActionButton()}var d=a.getConfigValue(c,"hideBackButton");if(d===true){NativeApi.navigation.hideBackButton()}else{NativeApi.navigation.showBackButton()}},showBackButton:function(){NativeApi.navigation.showBackButton()},hideBackButton:function(){NativeApi.navigation.hideBackButton()},showActionButton:function(a){NativeApi.navigation.showActionButton(a)},hideActionButton:function(){NativeApi.navigation.hideActionButton()}});(function(){Ext.Loader.setPath("Application","./app");Ext.syncRequire(["Application.resource.localizations.zh-cn","Application.resource.analyticsmap"]);Application.resource.base=Application.resource.localizations["zh-cn"];Ext.syncRequire(["Application.service.utils","Application.service.service"]);Utility=Application.service.utils})();Ext.application({name:"Lakala",launch:function(){Application.appInstance=this;if(Ext.os.is.iOS||Ext.os.is.Android){Application.navigation=Ext.create("Application.NavigationView",{fullscreen:true,autoDestroy:true,navigationBar:null})}else{Application.navigation=Ext.create("Application.NavigationView",{fullscreen:true,autoDestroy:true})}Application.console=Ext.getBody().insertHtml("afterBegin","<div id='log-console' class='mobilebank-console'></div>");document.addEventListener("deviceready",function(){NativeApi=cordova._native;document.addEventListener("resume",function(){Application.navigation.getActiveItem().fireEvent("appresume")},false);document.addEventListener("pause",function(){Application.navigation.getActiveItem().fireEvent("apppause")},false);Application.loadSession();var a=window.location.hash;if(a){a=a.substr(1);Application.loadPage(a)}else{Application.navigation.push(Ext.create("Ext.Label",{html:"没有设置入口点!"}))}},false)}});